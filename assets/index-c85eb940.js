var pi=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ya=pi((Sa,A)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const Rn=Object.prototype.toString;function xn(t){switch(Rn.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return O(t,Error)}}function me(t,e){return Rn.call(t)===`[object ${e}]`}function Nn(t){return me(t,"ErrorEvent")}function jt(t){return me(t,"DOMError")}function hi(t){return me(t,"DOMException")}function H(t){return me(t,"String")}function wn(t){return t===null||typeof t!="object"&&typeof t!="function"}function ce(t){return me(t,"Object")}function Rt(t){return typeof Event<"u"&&O(t,Event)}function mi(t){return typeof Element<"u"&&O(t,Element)}function Dn(t){return me(t,"RegExp")}function z(t){return!!(t&&t.then&&typeof t.then=="function")}function gi(t){return ce(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function In(t){return typeof t=="number"&&t!==t}function O(t,e){try{return t instanceof e}catch{return!1}}function Ie(t){return t&&t.Math==Math?t:void 0}const I=typeof globalThis=="object"&&Ie(globalThis)||typeof window=="object"&&Ie(window)||typeof self=="object"&&Ie(self)||typeof global=="object"&&Ie(global)||function(){return this}()||{};function Ke(){return I}function xt(t,e,n){const i=n||I,s=i.__SENTRY__=i.__SENTRY__||{};return s[t]||(s[t]=e())}const Ae=Ke(),yi=80;function ue(t,e={}){try{let n=t;const i=5,s=[];let r=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||yi;for(;n&&r++<i&&(u=Ei(n,l),!(u==="html"||r>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Ei(t,e){const n=t,i=[];let s,r,o,a,c;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const u=e&&e.length?e.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{i.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&H(s))for(r=s.split(/\s+/),c=0;c<r.length;c++)i.push(`.${r[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&i.push(`[${o}="${a}"]`);return i.join("")}function Si(){try{return Ae.document.location.href}catch{return""}}function Ti(t){return Ae.document&&Ae.document.querySelector?Ae.document.querySelector(t):null}class x extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}const bi=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function vi(t){return t==="http"||t==="https"}function Nt(t,e=!1){const{host:n,path:i,pass:s,port:r,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${r?`:${r}`:""}/${i&&`${i}/`}${o}`}function Ri(t){const e=bi.exec(t);if(!e)throw new x(`Invalid Sentry Dsn: ${t}`);const[n,i,s="",r,o="",a]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return kn({host:r,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:i})}function kn(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function xi(t){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;const{port:e,projectId:n,protocol:i}=t;if(["protocol","publicKey","host","projectId"].forEach(r=>{if(!t[r])throw new x(`Invalid Sentry Dsn: ${r} missing`)}),!n.match(/^\d+$/))throw new x(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!vi(i))throw new x(`Invalid Sentry Dsn: Invalid protocol ${i}`);if(e&&isNaN(parseInt(e,10)))throw new x(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function Ni(t){const e=typeof t=="string"?Ri(t):kn(t);return xi(e),e}const wi="Sentry Logger ",$e=["debug","info","warn","error","log","assert","trace"];function Bn(t){if(!("console"in I))return t();const e=I.console,n={};$e.forEach(i=>{const s=e[i]&&e[i].__sentry_original__;i in e&&s&&(n[i]=e[i],e[i]=s)});try{return t()}finally{Object.keys(n).forEach(i=>{e[i]=n[i]})}}function Ht(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?$e.forEach(n=>{e[n]=(...i)=>{t&&Bn(()=>{I.console[n](`${wi}[${n}]:`,...i)})}}):$e.forEach(n=>{e[n]=()=>{}}),e}let f;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?f=xt("logger",Ht):f=Ht();function Ee(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function qt(t,e){if(!Array.isArray(t))return"";const n=[];for(let i=0;i<t.length;i++){const s=t[i];try{n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Di(t,e,n=!1){return H(t)?Dn(e)?e.test(t):H(e)?n?t===e:t.includes(e):!1:!1}function Ze(t,e=[],n=!1){return e.some(i=>Di(t,i,n))}function T(t,e,n){if(!(e in t))return;const i=t[e],s=n(i);if(typeof s=="function")try{On(s,i)}catch{}t[e]=s}function wt(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function On(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,wt(t,"__sentry_original__",e)}function Dt(t){return t.__sentry_original__}function Ii(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function Un(t){if(xn(t))return{message:t.message,name:t.name,stack:t.stack,...Wt(t)};if(Rt(t)){const e={type:t.type,target:zt(t.target),currentTarget:zt(t.currentTarget),...Wt(t)};return typeof CustomEvent<"u"&&O(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function zt(t){try{return mi(t)?ue(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Wt(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function ki(t,e=40){const n=Object.keys(Un(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Ee(n[0],e);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>e))return i===n.length?s:Ee(s,e)}return""}function M(t){return _t(t,new Map)}function _t(t,e){if(ce(t)){const n=e.get(t);if(n!==void 0)return n;const i={};e.set(t,i);for(const s of Object.keys(t))typeof t[s]<"u"&&(i[s]=_t(t[s],e));return i}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const i=[];return e.set(t,i),t.forEach(s=>{i.push(_t(s,e))}),i}return t}const Gn=50,Xt=/\(error: (.*)\)/;function An(...t){const e=t.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0)=>{const s=[],r=n.split(`
`);for(let o=i;o<r.length;o++){const a=r[o];if(a.length>1024)continue;const c=Xt.test(a)?a.replace(Xt,"$1"):a;for(const u of e){const l=u(c);if(l){s.push(l);break}}if(s.length>=Gn)break}return Oi(s)}}function Bi(t){return Array.isArray(t)?An(...t):t}function Oi(t){if(!t.length)return[];const e=t.slice(0,Gn),n=e[e.length-1].function;n&&/sentryWrapped/.test(n)&&e.pop(),e.reverse();const i=e[e.length-1].function;return i&&/captureMessage|captureException/.test(i)&&e.pop(),e.map(s=>({...s,filename:s.filename||e[e.length-1].filename,function:s.function||"?"}))}const ot="<anonymous>";function q(t){try{return!t||typeof t!="function"?ot:t.name||ot}catch{return ot}}const X=Ke();function Yn(){if(!("fetch"in X))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function pt(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Ui(){if(!Yn())return!1;if(pt(X.fetch))return!0;let t=!1;const e=X.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=pt(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Gi(){const t=X.chrome,e=t&&t.app&&t.app.runtime,n="history"in X&&!!X.history.pushState&&!!X.history.replaceState;return!e&&n}const S=Ke(),Se={},Jt={};function Ai(t){if(!Jt[t])switch(Jt[t]=!0,t){case"console":Yi();break;case"dom":qi();break;case"xhr":Mi();break;case"fetch":Li();break;case"history":Ci();break;case"error":zi();break;case"unhandledrejection":Wi();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("unknown instrumentation type:",t);return}}function D(t,e){Se[t]=Se[t]||[],Se[t].push(e),Ai(t)}function k(t,e){if(!(!t||!Se[t]))for(const n of Se[t]||[])try{n(e)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${q(n)}
Error:`,i)}}function Yi(){"console"in S&&$e.forEach(function(t){t in S.console&&T(S.console,t,function(e){return function(...n){k("console",{args:n,level:t}),e&&e.apply(S.console,n)}})})}function Li(){Ui()&&T(S,"fetch",function(t){return function(...e){const n={args:e,fetchData:{method:$i(e),url:Pi(e)},startTimestamp:Date.now()};return k("fetch",{...n}),t.apply(S,e).then(i=>(k("fetch",{...n,endTimestamp:Date.now(),response:i}),i),i=>{throw k("fetch",{...n,endTimestamp:Date.now(),error:i}),i})}})}function $i(t=[]){return"Request"in S&&O(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Pi(t=[]){return typeof t[0]=="string"?t[0]:"Request"in S&&O(t[0],Request)?t[0].url:String(t[0])}function Mi(){if(!("XMLHttpRequest"in S))return;const t=XMLHttpRequest.prototype;T(t,"open",function(e){return function(...n){const i=n[1],s=this.__sentry_xhr__={method:H(n[0])?n[0].toUpperCase():n[0],url:n[1]};H(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const o=this.__sentry_xhr__;if(o&&this.readyState===4){try{o.status_code=this.status}catch{}k("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?T(this,"onreadystatechange",function(o){return function(...a){return r(),o.apply(this,a)}}):this.addEventListener("readystatechange",r),e.apply(this,n)}}),T(t,"send",function(e){return function(...n){return this.__sentry_xhr__&&n[0]!==void 0&&(this.__sentry_xhr__.body=n[0]),k("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),e.apply(this,n)}})}let ke;function Ci(){if(!Gi())return;const t=S.onpopstate;S.onpopstate=function(...n){const i=S.location.href,s=ke;if(ke=i,k("history",{from:s,to:i}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const r=ke,o=String(s);ke=o,k("history",{from:r,to:o})}return n.apply(this,i)}}T(S.history,"pushState",e),T(S.history,"replaceState",e)}const Fi=1e3;let Be,Oe;function ji(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function Hi(t){if(t.type!=="keypress")return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function Vt(t,e=!1){return n=>{if(!n||Oe===n||Hi(n))return;const i=n.type==="keypress"?"input":n.type;Be===void 0?(t({event:n,name:i,global:e}),Oe=n):ji(Oe,n)&&(t({event:n,name:i,global:e}),Oe=n),clearTimeout(Be),Be=S.setTimeout(()=>{Be=void 0},Fi)}}function qi(){if(!("document"in S))return;const t=k.bind(null,"dom"),e=Vt(t,!0);S.document.addEventListener("click",e,!1),S.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const i=S[n]&&S[n].prototype;!i||!i.hasOwnProperty||!i.hasOwnProperty("addEventListener")||(T(i,"addEventListener",function(s){return function(r,o,a){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[r]=u[r]||{refCount:0};if(!l.handler){const d=Vt(t);l.handler=d,s.call(this,r,d,a)}l.refCount++}catch{}return s.call(this,r,o,a)}}),T(i,"removeEventListener",function(s){return function(r,o,a){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[r];l&&(l.refCount--,l.refCount<=0&&(s.call(this,r,l.handler,a),l.handler=void 0,delete u[r]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,r,o,a)}}))})}let at=null;function zi(){at=S.onerror,S.onerror=function(t,e,n,i,s){return k("error",{column:i,error:s,line:n,msg:t,url:e}),at?at.apply(this,arguments):!1}}let ct=null;function Wi(){ct=S.onunhandledrejection,S.onunhandledrejection=function(t){return k("unhandledrejection",t),ct?ct.apply(this,arguments):!0}}function Xi(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(s){if(t)return e.has(s)?!0:(e.add(s),!1);for(let r=0;r<e.length;r++)if(e[r]===s)return!0;return e.push(s),!1}function i(s){if(t)e.delete(s);else for(let r=0;r<e.length;r++)if(e[r]===s){e.splice(r,1);break}}return[n,i]}function C(){const t=I,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function Ln(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function J(t){const{message:e,event_id:n}=t;if(e)return e;const i=Ln(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function ht(t,e,n){const i=t.exception=t.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=e||""),r.type||(r.type=n||"Error")}function be(t,e){const n=Ln(t);if(!n)return;const i={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...i,...s,...e},e&&"data"in e){const r={...s&&s.data,...e.data};n.mechanism.data=r}}function Kt(t){if(t&&t.__sentry_captured__)return!0;try{wt(t,"__sentry_captured__",!0)}catch{}return!1}function Pe(t){return Array.isArray(t)?t:[t]}function Ji(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Vi(){return"npm"}function It(){return!Ji()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function P(t,e){return t.require(e)}function K(t){let e;try{e=P(A,t)}catch{}try{const{cwd:n}=P(A,"process");e=P(A,`${n()}/node_modules/${t}`)}catch{}return e}function Y(t,e=1/0,n=1/0){try{return mt("",t,e,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function $n(t,e=3,n=100*1024){const i=Y(t,e);return es(i)>n?$n(t,e-1,n):i}function mt(t,e,n=1/0,i=1/0,s=Xi()){const[r,o]=s;if(e===null||["number","boolean","string"].includes(typeof e)&&!In(e))return e;const a=Ki(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;let c=n;if(typeof e.__sentry_override_normalization_depth__=="number"&&(c=e.__sentry_override_normalization_depth__),c===0)return a.replace("object ","");if(r(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const _=u.toJSON();return mt("",_,c-1,i,s)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const p=Un(e);for(const _ in p){if(!Object.prototype.hasOwnProperty.call(p,_))continue;if(d>=i){l[_]="[MaxProperties ~]";break}const m=p[_];l[_]=mt(_,m,c-1,i,s),d++}return o(e),l}function Ki(t,e){try{return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&e===global?"[Global]":typeof window<"u"&&e===window?"[Window]":typeof document<"u"&&e===document?"[Document]":gi(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?`[Function: ${q(e)}]`:typeof e=="symbol"?`[${String(e)}]`:typeof e=="bigint"?`[BigInt: ${String(e)}]`:`[object ${Zi(e)}]`}catch(n){return`**non-serializable** (${n})`}}function Zi(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function Qi(t){return~-encodeURI(t).split(/%..|./).length}function es(t){return Qi(JSON.stringify(t))}var U;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const i=2;t[t.REJECTED=i]="REJECTED"})(U||(U={}));function Z(t){return new N(e=>{e(t)})}function Me(t){return new N((e,n)=>{n(t)})}class N{__init(){this._state=U.PENDING}__init2(){this._handlers=[]}constructor(e){N.prototype.__init.call(this),N.prototype.__init2.call(this),N.prototype.__init3.call(this),N.prototype.__init4.call(this),N.prototype.__init5.call(this),N.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new N((i,s)=>{this._handlers.push([!1,r=>{if(!e)i(r);else try{i(e(r))}catch(o){s(o)}},r=>{if(!n)s(r);else try{i(n(r))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new N((n,i)=>{let s,r;return this.then(o=>{r=!1,s=o,e&&e()},o=>{r=!0,s=o,e&&e()}).then(()=>{if(r){i(s);return}n(s)})})}__init3(){this._resolve=e=>{this._setResult(U.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(U.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{if(this._state===U.PENDING){if(z(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===U.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===U.RESOLVED&&n[1](this._value),this._state===U.REJECTED&&n[2](this._value),n[0]=!0)})}}}function ts(t){const e=[];function n(){return t===void 0||e.length<t}function i(o){return e.splice(e.indexOf(o),1)[0]}function s(o){if(!n())return Me(new x("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function r(o){return new N((a,c)=>{let u=e.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Z(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:e,add:s,drain:r}}function ut(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",i=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+i}}function ns(t){return t.split(/[\?#]/,1)[0]}function Ce(t){return t.split(/\\?\//).filter(e=>e.length>0&&e!==",").length}function is(t,e={}){const n=t.method&&t.method.toUpperCase();let i="",s="url";e.customRoute||t.route?(i=e.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,s="route"):(t.originalUrl||t.url)&&(i=ns(t.originalUrl||t.url||""));let r="";return e.method&&n&&(r+=n),e.method&&e.path&&(r+=" "),e.path&&i&&(r+=i),[r,s]}const ss=["fatal","error","warning","log","info","debug"];function rs(t){return t==="warn"?"warning":ss.includes(t)?t:"log"}const Pn=Ke(),gt={nowSeconds:()=>Date.now()/1e3};function os(){const{performance:t}=Pn;if(!t||!t.now)return;const e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function as(){try{return P(A,"perf_hooks").performance}catch{return}}const dt=It()?as():os(),Zt=dt===void 0?gt:{nowSeconds:()=>(dt.timeOrigin+dt.now())/1e3},Qe=gt.nowSeconds.bind(gt),kt=Zt.nowSeconds.bind(Zt),ve=kt,de=(()=>{const{performance:t}=Pn;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-i):e,r=s<e,o=t.timing&&t.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-i):e,u=c<e;return r||u?s<=c?t.timeOrigin:o:i})(),cs=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function us(t){const e=t.match(cs);if(!t||!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function et(t,e=[]){return[t,e]}function ds(t,e){const[n,i]=t;return[n,[...i,e]]}function Qt(t,e){const n=t[1];for(const i of n){const s=i[0].type;if(e(i,s))return!0}return!1}function yt(t,e){return(e||new TextEncoder).encode(t)}function Mn(t,e){const[n,i]=t;let s=JSON.stringify(n);function r(o){typeof s=="string"?s=typeof o=="string"?s+o:[yt(s,e),o]:s.push(typeof o=="string"?yt(o,e):o)}for(const o of i){const[a,c]=o;if(r(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)r(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(Y(c))}r(u)}}return typeof s=="string"?s:ls(s)}function ls(t){const e=t.reduce((s,r)=>s+r.length,0),n=new Uint8Array(e);let i=0;for(const s of t)n.set(s,i),i+=s.length;return n}function fs(t,e){const n=typeof t.data=="string"?yt(t.data,e):t.data;return[M({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const _s={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay"};function en(t){return _s[t]}function Cn(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function ps(t,e,n,i){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&{dsn:Nt(i)},...t.type==="transaction"&&s&&{trace:M({...s})}}}function hs(t,e,n){const i=[{type:"client_report"},{timestamp:n||Qe(),discarded_events:t}];return et(e?{dsn:e}:{},[i])}const ms=60*1e3;function gs(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${t}`);return isNaN(i)?ms:i-e}function ys(t,e){return t[e]||t.all||0}function Es(t,e,n=Date.now()){return ys(t,e)>n}function Ss(t,{statusCode:e,headers:n},i=Date.now()){const s={...t},r=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(r)for(const a of r.trim().split(",")){const[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)s.all=i+d;else for(const p of u.split(";"))s[p]=i+d}else o?s.all=i+gs(o,i):e===429&&(s.all=i+60*1e3);return s}const Et="baggage",Fn="sentry-",Ts=/^sentry-/,bs=8192;function vs(t){if(!H(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce((i,s)=>{const r=tn(s);return{...i,...r}},{});else{if(!t)return;e=tn(t)}const n=Object.entries(e).reduce((i,[s,r])=>{if(s.match(Ts)){const o=s.slice(Fn.length);i[o]=r}return i},{});if(Object.keys(n).length>0)return n}function jn(t){const e=Object.entries(t).reduce((n,[i,s])=>(s&&(n[`${Fn}${i}`]=s),n),{});return Rs(e)}function tn(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,i])=>(e[n]=i,e),{})}function Rs(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,i],s)=>{const r=`${encodeURIComponent(n)}=${encodeURIComponent(i)}`,o=s===0?r:`${e},${r}`;return o.length>bs?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Not adding key: ${n} with val: ${i} to baggage header due to exceeding baggage size limits.`),e):o},"")}const Bt="production";function xs(t){const e=kt(),n={sid:C(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>ws(n)};return t&&le(n,t),n}function le(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||kt(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:C()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Ns(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),le(t,n)}function ws(t){return M({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const Ds=100;class F{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const n=new F;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&le(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof F?n:this}return e instanceof F?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):ce(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,n){const i=typeof n=="number"?n:Ds;if(i<=0)return this;const s={timestamp:Qe(),...e};return this._breadcrumbs=[...this._breadcrumbs,s].slice(-i),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const i=this._span.transaction&&this._span.transaction.name;i&&(e.tags={transaction:i,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Hn(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,n,i,s=0){return new N((r,o)=>{const a=e[s];if(n===null||typeof a!="function")r(n);else{const c=a({...n},i);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&f.log(`Event processor "${a.id}" dropped event`),z(c)?c.then(u=>this._notifyEventProcessors(e,u,i,s+1).then(r)).then(null,o):this._notifyEventProcessors(e,c,i,s+1).then(r).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?Pe(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Hn(){return xt("globalEventProcessors",()=>[])}function Ot(t){Hn().push(t)}const Ut=4,Is=100;class we{__init(){this._stack=[{}]}constructor(e,n=new F,i=Ut){this._version=i,we.prototype.__init.call(this),this.getStackTop().scope=n,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=F.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const i=this._lastEventId=n&&n.event_id?n.event_id:C(),s=new Error("Sentry syntheticException");return this._withClient((r,o)=>{r.captureException(e,{originalException:e,syntheticException:s,...n,event_id:i},o)}),i}captureMessage(e,n,i){const s=this._lastEventId=i&&i.event_id?i.event_id:C(),r=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,n,{originalException:e,syntheticException:r,...i,event_id:s},a)}),s}captureEvent(e,n){const i=n&&n.event_id?n.event_id:C();return e.type||(this._lastEventId=i),this._withClient((s,r)=>{s.captureEvent(e,{...n,event_id:i},r)}),i}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:i,client:s}=this.getStackTop();if(!i||!s)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:o=Is}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:Qe(),...e},u=r?Bn(()=>r(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),i.addBreadcrumb(u,o))}setUser(e){const n=this.getScope();n&&n.setUser(e)}setTags(e){const n=this.getScope();n&&n.setTags(e)}setExtras(e){const n=this.getScope();n&&n.setExtras(e)}setTag(e,n){const i=this.getScope();i&&i.setTag(e,n)}setExtra(e,n){const i=this.getScope();i&&i.setExtra(e,n)}setContext(e,n){const i=this.getScope();i&&i.setContext(e,n)}configureScope(e){const{scope:n,client:i}=this.getStackTop();n&&i&&e(n)}run(e){const n=nn(this);try{e(this)}finally{nn(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){return this._callExtensionMethod("startTransaction",e,n)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop(),n=e&&e.scope,i=n&&n.getSession();i&&Ns(i),this._sendSessionUpdate(),n&&n.setSession()}startSession(e){const{scope:n,client:i}=this.getStackTop(),{release:s,environment:r=Bt}=i&&i.getOptions()||{},{userAgent:o}=I.navigator||{},a=xs({release:s,environment:r,...n&&{user:n.getUser()},...o&&{userAgent:o},...e});if(n){const c=n.getSession&&n.getSession();c&&c.status==="ok"&&le(c,{status:"exited"}),this.endSession(),n.setSession(a)}return a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop();if(!e)return;const i=e.getSession();i&&n&&n.captureSession&&n.captureSession(i)}_withClient(e){const{scope:n,client:i}=this.getStackTop();i&&e(i,n)}_callExtensionMethod(e,...n){const s=ge().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ge(){return I.__SENTRY__=I.__SENTRY__||{extensions:{},hub:void 0},I}function nn(t){const e=ge(),n=$(e);return Gt(e,t),n}function b(){const t=ge();return(!qn(t)||$(t).isOlderThan(Ut))&&Gt(t,new we),It()?ks(t):$(t)}function ks(t){try{const e=ge().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return $(t);if(!qn(n)||$(n).isOlderThan(Ut)){const i=$(t).getStackTop();Gt(n,new we(i.client,F.clone(i.scope)))}return $(n)}catch{return $(t)}}function qn(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function $(t){return xt("hub",()=>new we,t)}function Gt(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function At(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=b().getClient(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function tt(t){const n=(t||b()).getScope();return n&&n.getTransaction()}let sn=!1;function Bs(){sn||(sn=!0,D("error",rn),D("unhandledrejection",rn))}function rn(){const t=tt();if(t){const e="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}class nt{__init(){this.spans=[]}constructor(e=1e3){nt.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class G{__init2(){this.traceId=C()}__init3(){this.spanId=C().substring(16)}__init4(){this.startTimestamp=ve()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(e){if(G.prototype.__init2.call(this),G.prototype.__init3.call(this),G.prototype.__init4.call(this),G.prototype.__init5.call(this),G.prototype.__init6.call(this),G.prototype.__init7.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp),e.instrumenter&&(this.instrumenter=e.instrumenter)}startChild(e){const n=new G({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&n.transaction){const i=e&&e.op||"< unknown op >",s=n.transaction.name||"< unknown name >",r=n.transaction.spanId,o=`[Tracing] Starting '${i}' span on transaction '${s}' (${r}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},f.log(o)}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));const n=Os(e);return n!=="unknown_error"&&this.setStatus(n),this}isSuccess(){return this.status==="ok"}finish(e){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&f.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof e=="number"?e:ve()}toTraceparent(){let e="";return this.sampled!==void 0&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return M({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=e.data||{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=e.spanId||this.spanId,this.startTimestamp=e.startTimestamp||this.startTimestamp,this.status=e.status,this.tags=e.tags||{},this.traceId=e.traceId||this.traceId,this}getTraceContext(){return M({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return M({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function Os(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class ie extends G{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(e,n){super(e),ie.prototype.__init.call(this),ie.prototype.__init2.call(this),ie.prototype.__init3.call(this),this._hub=n||b(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{}},this._trimEnd=e.trimEnd,this.transaction=this;const i=this.metadata.dynamicSamplingContext;i&&(this._frozenDynamicSamplingContext={...i})}get name(){return this._name}set name(e){this.setName(e)}setName(e,n="custom"){this._name=e,this.metadata.source=n}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new nt(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,i=""){this._measurements[e]={value:n,unit:i}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(this.endTimestamp!==void 0)return;this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const i=this.spanRecorder?this.spanRecorder.spans.filter(a=>a!==this&&a.endTimestamp):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce((a,c)=>a.endTimestamp&&c.endTimestamp?a.endTimestamp>c.endTimestamp?a:c:a).endTimestamp);const s=this.metadata,r={contexts:{...this._contexts,trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...s,dynamicSamplingContext:this.getDynamicSamplingContext()},...s.source&&{transaction_info:{source:s.source}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(r)}toContext(){const e=super.toContext();return M({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||b(),n=e&&e.getClient();if(!n)return{};const{environment:i,release:s}=n.getOptions()||{},{publicKey:r}=n.getDsn()||{},o=this.metadata.sampleRate,a=o!==void 0?o.toString():void 0,c=e.getScope(),{segment:u}=c&&c.getUser()||{},l=this.metadata.source,d=l&&l!=="url"?this.name:void 0;return M({environment:i||Bt,release:s,transaction:d,user_segment:u,public_key:r,trace_id:this.traceId,sample_rate:a})}}const Ye={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Us="finishReason",ne=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Gs extends nt{constructor(e,n,i,s){super(s),this._pushActivity=e,this._popActivity=n,this.transactionSpanId=i}add(e){e.spanId!==this.transactionSpanId&&(e.finish=n=>{e.endTimestamp=typeof n=="number"?n:ve(),this._popActivity(e.spanId)},e.endTimestamp===void 0&&this._pushActivity(e.spanId)),super.add(e)}}class L extends ie{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._idleTimeoutCanceledPermanently=!1}__init5(){this._beforeFinishCallbacks=[]}__init6(){this._finishReason=ne[4]}constructor(e,n,i=Ye.idleTimeout,s=Ye.finalTimeout,r=Ye.heartbeatInterval,o=!1){super(e,n),this._idleHub=n,this._idleTimeout=i,this._finalTimeout=s,this._heartbeatInterval=r,this._onScope=o,L.prototype.__init.call(this),L.prototype.__init2.call(this),L.prototype.__init3.call(this),L.prototype.__init4.call(this),L.prototype.__init5.call(this),L.prototype.__init6.call(this),o&&(on(n),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.configureScope(a=>a.setSpan(this))),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=ne[3],this.finish())},this._finalTimeout)}finish(e=ve()){if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(Us,this._finishReason),this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] finishing IdleTransaction",new Date(e*1e3).toISOString(),this.op);for(const n of this._beforeFinishCallbacks)n(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter(n=>{if(n.spanId===this.spanId)return!0;n.endTimestamp||(n.endTimestamp=e,n.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));const i=n.startTimestamp<e;return i||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(n,void 0,2)),i}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] No active IdleTransaction");return this._onScope&&on(this._idleHub),super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},i=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new Gs(n,i,this.spanId,e),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=ne[5],this.finish(e)))}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=ne[1],this.finish(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] popActivity ${e}`),delete this.activities[e],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=ve();this._idleTimeoutCanceledPermanently?(this._finishReason=ne[5],this.finish(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=ne[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function on(t){const e=t.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}function As(){const t=this.getScope();if(t){const e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function zn(t,e,n){if(!At(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setMetadata({sampleRate:Number(t.sampled)}),t;let i;return typeof e.tracesSampler=="function"?(i=e.tracesSampler(n),t.setMetadata({sampleRate:Number(i)})):n.parentSampled!==void 0?i=n.parentSampled:typeof e.tracesSampleRate<"u"?(i=e.tracesSampleRate,t.setMetadata({sampleRate:Number(i)})):(i=1,t.setMetadata({sampleRate:i})),Ys(i)?i?(t.sampled=Math.random()<i,t.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] starting ${t.op} transaction - ${t.name}`),t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),t)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function Ys(t){return In(t)||!(typeof t=="number"||typeof t=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function Ls(t,e){const n=this.getClient(),i=n&&n.getOptions()||{},s=i.instrumenter||"sentry",r=t.instrumenter||"sentry";s!==r&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`A transaction was started with instrumenter=\`${r}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let o=new ie(t,this);return o=zn(o,i,{parentSampled:t.parentSampled,transactionContext:t,...e}),o.sampled&&o.initSpanRecorder(i._experiments&&i._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function an(t,e,n,i,s,r,o){const a=t.getClient(),c=a&&a.getOptions()||{};let u=new L(e,t,n,i,o,s);return u=zn(u,c,{parentSampled:e.parentSampled,transactionContext:e,...r}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function Wn(){const t=ge();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Ls),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=As),Bs())}function $s(t,e){return b().captureException(t,{captureContext:e})}function Ps(t){b().withScope(t)}const Ms="7";function Cs(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Fs(t){return`${Cs(t)}${t.projectId}/envelope/`}function js(t,e){return Ii({sentry_key:t.publicKey,sentry_version:Ms,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Xn(t,e={}){const n=typeof e=="string"?e:e.tunnel,i=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${Fs(t)}?${js(t,i)}`}function Hs(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function qs(t,e,n,i){const s=Cn(n),r={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&{dsn:Nt(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t];return et(r,[o])}function zs(t,e,n,i){const s=Cn(n),r=t.type&&t.type!=="replay_event"?t.type:"event";Hs(t,n&&n.sdk);const o=ps(t,s,i,e);return delete t.sdkProcessingMetadata,et(o,[[{type:r},t]])}const cn=[];function Ws(t){const e={};return t.forEach(n=>{const{name:i}=n,s=e[i];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[i]=n)}),Object.keys(e).map(n=>e[n])}function Xs(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let i;Array.isArray(n)?i=[...e,...n]:typeof n=="function"?i=Pe(n(e)):i=e;const s=Ws(i),r=Vs(s,o=>o.name==="Debug");if(r!==-1){const[o]=s.splice(r,1);s.push(o)}return s}function Js(t){const e={};return t.forEach(n=>{n&&Jn(n,e)}),e}function Jn(t,e){e[t.name]=t,cn.indexOf(t.name)===-1&&(t.setupOnce(Ot,b),cn.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Integration installed: ${t.name}`))}function Vs(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function Ks(t,e,n,i){const{normalizeDepth:s=3,normalizeMaxBreadth:r=1e3}=t,o={...e,event_id:e.event_id||n.event_id||C(),timestamp:e.timestamp||Qe()},a=n.integrations||t.integrations.map(l=>l.name);Zs(o,t),er(o,a),Qs(o,t.stackParser);let c=i;n.captureContext&&(c=F.clone(c).update(n.captureContext));let u=Z(o);if(c){if(c.getAttachments){const l=[...n.attachments||[],...c.getAttachments()];l.length&&(n.attachments=l)}u=c.applyToEvent(o,n)}return u.then(l=>typeof s=="number"&&s>0?tr(l,s,r):l)}function Zs(t,e){const{environment:n,release:i,dist:s,maxValueLength:r=250}=e;"environment"in t||(t.environment="environment"in e?n:Bt),t.release===void 0&&i!==void 0&&(t.release=i),t.dist===void 0&&s!==void 0&&(t.dist=s),t.message&&(t.message=Ee(t.message,r));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=Ee(o.value,r));const a=t.request;a&&a.url&&(a.url=Ee(a.url,r))}function Qs(t,e){const n=I._sentryDebugIds;if(!n)return;const i=Object.keys(n).reduce((o,a)=>{const c=e(a);for(const u of c)if(u.abs_path){o[u.abs_path]=n[a];break}return o},{}),s=new Set;try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.abs_path&&s.add(a.abs_path)})})}catch{}t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;s.forEach(o=>{i[o]&&r.push({type:"sourcemap",code_file:o,debug_id:i[o]})})}function er(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function tr(t,e,n){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:Y(s.data,e,n)}}))},...t.user&&{user:Y(t.user,e,n)},...t.contexts&&{contexts:Y(t.contexts,e,n)},...t.extra&&{extra:Y(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=Y(t.contexts.trace.data,e,n))),t.spans&&(i.spans=t.spans.map(s=>(s.data&&(s.data=Y(s.data,e,n)),s))),i}const un="Not capturing exception because it's already been captured.";class W{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(W.prototype.__init.call(this),W.prototype.__init2.call(this),W.prototype.__init3.call(this),W.prototype.__init4.call(this),W.prototype.__init5.call(this),this._options=e,e.dsn){this._dsn=Ni(e.dsn);const n=Xn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("No DSN provided, client will not do anything.")}captureException(e,n,i){if(Kt(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(un);return}let s=n&&n.event_id;return this._process(this.eventFromException(e,n).then(r=>this._captureEvent(r,n,i)).then(r=>{s=r})),s}captureMessage(e,n,i,s){let r=i&&i.event_id;const o=wn(e)?this.eventFromMessage(String(e),n,i):this.eventFromException(e,i);return this._process(o.then(a=>this._captureEvent(a,i,s)).then(a=>{r=a})),r}captureEvent(e,n,i){if(n&&n.originalException&&Kt(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(un);return}let s=n&&n.event_id;return this._process(this._captureEvent(e,n,i).then(r=>{s=r})),s}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),le(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(i=>n.flush(e).then(s=>i&&s)):Z(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Js(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Jn(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let i=zs(e,this._dsn,this._options._metadata,this._options.tunnel);for(const r of n.attachments||[])i=ds(i,fs(r,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(i);s&&s.then(r=>this.emit("afterSendEvent",e,r),null)}}sendSession(e){if(this._dsn){const n=qs(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,i){if(this._options.sendClientReports){const s=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(i=>i(...n))}_updateSessionFromEvent(e,n){let i=!1,s=!1;const r=n.exception&&n.exception.values;if(r){s=!0;for(const c of r){const u=c.mechanism;if(u&&u.handled===!1){i=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&i)&&(le(e,{...i&&{status:"crashed"},errors:e.errors||Number(s||i)}),this.captureSession(e))}_isClientDoneProcessing(e){return new N(n=>{let i=0;const s=1,r=setInterval(()=>{this._numProcessing==0?(clearInterval(r),n(!0)):(i+=s,e&&i>=e&&(clearInterval(r),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,i){const s=this.getOptions(),r=Object.keys(this._integrations);return!n.integrations&&r.length>0&&(n.integrations=r),Ks(s,e,n,i)}_captureEvent(e,n={},i){return this._processEvent(e,n,i).then(s=>s.event_id,s=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const r=s;r.logLevel==="log"?f.log(r.message):f.warn(r)}})}_processEvent(e,n,i){const s=this.getOptions(),{sampleRate:r}=s;if(!this._isEnabled())return Me(new x("SDK not enabled, will not capture event.","log"));const o=Kn(e),a=Vn(e),c=e.type||"error",u=`before send for type \`${c}\``;if(a&&typeof r=="number"&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",e),Me(new x(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const l=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,i).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",l,e),new x("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const _=ir(s,d,n);return nr(_,u)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",l,e),new x(`${u} returned \`null\`, will not send event.`,"log");const p=i&&i.getSession();!o&&p&&this._updateSessionFromEvent(p,d);const _=d.transaction_info;if(o&&_&&d.transaction!==e.transaction){const m="custom";d.transaction_info={..._,source:m}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof x?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new x(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:e[n]}})}}function nr(t,e){const n=`${e} must return \`null\` or a valid event.`;if(z(t))return t.then(i=>{if(!ce(i)&&i!==null)throw new x(n);return i},i=>{throw new x(`${e} rejected with ${i}`)});if(!ce(t)&&t!==null)throw new x(n);return t}function ir(t,e,n){const{beforeSend:i,beforeSendTransaction:s}=t;return Vn(e)&&i?i(e,n):Kn(e)&&s?s(e,n):e}function Vn(t){return t.type===void 0}function Kn(t){return t.type==="transaction"}function sr(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?f.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=b(),i=n.getScope();i&&i.update(e.initialScope);const s=new t(e);n.bindClient(s)}const rr=30;function Zn(t,e,n=ts(t.bufferSize||rr)){let i={};const s=o=>n.drain(o);function r(o){const a=[];if(Qt(o,(d,p)=>{const _=en(p);if(Es(i,_)){const m=dn(d,p);t.recordDroppedEvent("ratelimit_backoff",_,m)}else a.push(d)}),a.length===0)return Z();const c=et(o[0],a),u=d=>{Qt(c,(p,_)=>{const m=dn(p,_);t.recordDroppedEvent(d,en(_),m)})},l=()=>e({body:Mn(c,t.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Ss(i,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof x)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Skipped sending event because buffer is full."),u("queue_overflow"),Z();throw d})}return r.__sentry__baseTransport__=!0,{send:r,flush:s}}function dn(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}const ln="7.44.1";let fn;class Re{constructor(){Re.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Re.id}setupOnce(){fn=Function.prototype.toString,Function.prototype.toString=function(...e){const n=Dt(this)||this;return fn.apply(n,e)}}}Re.__initStatic();const or=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class se{static __initStatic(){this.id="InboundFilters"}__init(){this.name=se.id}constructor(e={}){this._options=e,se.prototype.__init.call(this)}setupOnce(e,n){const i=s=>{const r=n();if(r){const o=r.getIntegration(se);if(o){const a=r.getClient(),c=a?a.getOptions():{},u=ar(o._options,c);return cr(s,u)?null:s}}return s};i.id=this.name,e(i)}}se.__initStatic();function ar(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...or],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function cr(t,e){return e.ignoreInternal&&_r(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being internal Sentry Error.
Event: ${J(t)}`),!0):ur(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${J(t)}`),!0):dr(t,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${J(t)}.
Url: ${Fe(t)}`),!0):lr(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${J(t)}.
Url: ${Fe(t)}`),!0)}function ur(t,e){return!e||!e.length?!1:fr(t).some(n=>Ze(n,e))}function dr(t,e){if(!e||!e.length)return!1;const n=Fe(t);return n?Ze(n,e):!1}function lr(t,e){if(!e||!e.length)return!0;const n=Fe(t);return n?Ze(n,e):!0}function fr(t){if(t.message)return[t.message];if(t.exception)try{const{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Cannot extract message for event ${J(t)}`),[]}return[]}function _r(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function pr(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Fe(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?pr(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Cannot extract url for event ${J(t)}`),null}}const g=I;let St=0;function Qn(){return St>0}function hr(){St++,setTimeout(()=>{St--})}function fe(t,e={},n){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(Dt(t))return t}catch{return t}const i=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const r=s.map(o=>fe(o,e));return t.apply(this,r)}catch(r){throw hr(),Ps(o=>{o.addEventProcessor(a=>(e.mechanism&&(ht(a,void 0,void 0),be(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),$s(r)}),r}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}catch{}On(i,t),wt(t,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return t.name}})}catch{}return i}function ei(t,e){const n=Yt(t,e),i={type:e&&e.name,value:Er(e)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function mr(t,e,n,i){const r=b().getClient(),o=r&&r.getOptions().normalizeDepth,a={exception:{values:[{type:Rt(e)?e.constructor.name:i?"UnhandledRejection":"Error",value:`Non-Error ${i?"promise rejection":"exception"} captured with keys: ${ki(e)}`}]},extra:{__serialized__:$n(e,o)}};if(n){const c=Yt(t,n);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function lt(t,e){return{exception:{values:[ei(t,e)]}}}function Yt(t,e){const n=e.stacktrace||e.stack||"",i=yr(e);try{return t(n,i)}catch{}return[]}const gr=/Minified React error #\d+;/i;function yr(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(gr.test(t.message))return 1}return 0}function Er(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Sr(t,e,n,i){const s=n&&n.syntheticException||void 0,r=Lt(t,e,s,i);return be(r),r.level="error",n&&n.event_id&&(r.event_id=n.event_id),Z(r)}function Tr(t,e,n="info",i,s){const r=i&&i.syntheticException||void 0,o=Tt(t,e,r,s);return o.level=n,i&&i.event_id&&(o.event_id=i.event_id),Z(o)}function Lt(t,e,n,i,s){let r;if(Nn(e)&&e.error)return lt(t,e.error);if(jt(e)||hi(e)){const o=e;if("stack"in e)r=lt(t,e);else{const a=o.name||(jt(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;r=Tt(t,c,n,i),ht(r,c)}return"code"in o&&(r.tags={...r.tags,"DOMException.code":`${o.code}`}),r}return xn(e)?lt(t,e):ce(e)||Rt(e)?(r=mr(t,e,n,s),be(r,{synthetic:!0}),r):(r=Tt(t,e,n,i),ht(r,`${e}`,void 0),be(r,{synthetic:!0}),r)}function Tt(t,e,n,i){const s={message:e};if(i&&n){const r=Yt(t,n);r.length&&(s.exception={values:[{value:e,stacktrace:{frames:r}}]})}return s}const Ue=1024,ti="Breadcrumbs";class xe{static __initStatic(){this.id=ti}__init(){this.name=xe.id}constructor(e){xe.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&D("console",vr),this.options.dom&&D("dom",br(this.options.dom)),this.options.xhr&&D("xhr",Rr),this.options.fetch&&D("fetch",xr),this.options.history&&D("history",Nr)}addSentryBreadcrumb(e){this.options.sentry&&b().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:J(e)},{event:e})}}xe.__initStatic();function br(t){function e(n){let i,s=typeof t=="object"?t.serializeAttribute:void 0,r=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;r&&r>Ue&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`\`dom.maxStringLength\` cannot exceed ${Ue}, but a value of ${r} was configured. Sentry will use ${Ue} instead.`),r=Ue),typeof s=="string"&&(s=[s]);try{const o=n.event;i=wr(o)?ue(o.target,{keyAttrs:s,maxStringLength:r}):ue(o,{keyAttrs:s,maxStringLength:r})}catch{i="<unknown>"}i.length!==0&&b().addBreadcrumb({category:`ui.${n.name}`,message:i},{event:n.event,name:n.name,global:n.global})}return e}function vr(t){for(let n=0;n<t.args.length;n++)if(t.args[n]==="ref=Ref<"){t.args[n+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:rs(t.level),message:qt(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${qt(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;b().addBreadcrumb(e,{input:t.args,level:t.level})}function Rr(t){const{startTimestamp:e,endTimestamp:n}=t;if(!e||!n||!t.xhr.__sentry_xhr__)return;const{method:i,url:s,status_code:r,body:o}=t.xhr.__sentry_xhr__,a={method:i,url:s,status_code:r},c={xhr:t.xhr,input:o,startTimestamp:e,endTimestamp:n};b().addBreadcrumb({category:"xhr",data:a,type:"http"},c)}function xr(t){const{startTimestamp:e,endTimestamp:n}=t;if(n&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const i=t.fetchData,s={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};b().addBreadcrumb({category:"fetch",data:i,level:"error",type:"http"},s)}else{const i={...t.fetchData,status_code:t.response&&t.response.status},s={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};b().addBreadcrumb({category:"fetch",data:i,type:"http"},s)}}function Nr(t){let e=t.from,n=t.to;const i=ut(g.location.href);let s=ut(e);const r=ut(n);s.path||(s=i),i.protocol===r.protocol&&i.host===r.host&&(n=r.relative),i.protocol===s.protocol&&i.host===s.host&&(e=s.relative),b().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}function wr(t){return t&&!!t.target}class Dr extends W{constructor(e){const n=g.SENTRY_SDK_SOURCE||Vi();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:ln}],version:ln},super(e),e.sendClientReports&&g.document&&g.document.addEventListener("visibilitychange",()=>{g.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return Sr(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",i){return Tr(this._options.stackParser,e,n,i,this._options.attachStacktrace)}sendEvent(e,n){const i=this.getIntegrationById(ti);i&&i.addSentryBreadcrumb&&i.addSentryBreadcrumb(e),super.sendEvent(e,n)}_prepareEvent(e,n,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,i)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Sending outcomes:",e);const n=Xn(this._dsn,this._options),i=hs(e,this._options.tunnel&&Nt(this._dsn));try{Object.prototype.toString.call(g&&g.navigator)==="[object Navigator]"&&typeof g.navigator.sendBeacon=="function"&&!this._options.transportOptions?g.navigator.sendBeacon.bind(g.navigator)(n,Mn(i)):this._sendEnvelope(i)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(s)}}}let ye;function Ir(){if(ye)return ye;if(pt(g.fetch))return ye=g.fetch.bind(g);const t=g.document;let e=g.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const i=n.contentWindow;i&&i.fetch&&(e=i.fetch),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return ye=e.bind(g)}function kr(){ye=void 0}function Br(t,e=Ir()){function n(i){const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:i.body.length<=65536,...t.fetchOptions};try{return e(t.url,s).then(r=>({statusCode:r.status,headers:{"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")}}))}catch(r){return kr(),Me(r)}}return Zn(t,n)}const Or=4;function Ur(t){function e(n){return new N((i,s)=>{const r=new XMLHttpRequest;r.onerror=s,r.onreadystatechange=()=>{r.readyState===Or&&i({statusCode:r.status,headers:{"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")}})},r.open("POST",t.url);for(const o in t.headers)Object.prototype.hasOwnProperty.call(t.headers,o)&&r.setRequestHeader(o,t.headers[o]);r.send(n.body)})}return Zn(t,e)}const it="?",Gr=30,Ar=40,Yr=50;function $t(t,e,n,i){const s={filename:t,abs_path:t,function:e,in_app:!0};return n!==void 0&&(s.lineno=n),i!==void 0&&(s.colno=i),s}const Lr=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?(?:async )?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$r=/\((\S*)(?::(\d+))(?::(\d+))\)/,Pr=t=>{const e=Lr.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const r=$r.exec(e[2]);r&&(e[2]=r[1],e[3]=r[2],e[4]=r[3])}const[i,s]=ni(e[1]||it,e[2]);return $t(s,i,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},Mr=[Gr,Pr],Cr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Fr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,jr=t=>{const e=Cr.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const r=Fr.exec(e[3]);r&&(e[1]=e[1]||"eval",e[3]=r[1],e[4]=r[2],e[5]="")}let i=e[3],s=e[1]||it;return[s,i]=ni(s,i),$t(i,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Hr=[Yr,jr],qr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,zr=t=>{const e=qr.exec(t);return e?$t(e[2],e[1]||it,+e[3],e[4]?+e[4]:void 0):void 0},Wr=[Ar,zr],Xr=[Mr,Hr,Wr],Jr=An(...Xr),ni=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:it,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};class j{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=j.id}__init2(){this._installFunc={onerror:Vr,onunhandledrejection:Kr}}constructor(e){j.prototype.__init.call(this),j.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const i=this._installFunc[n];i&&e[n]&&(eo(n),i(),this._installFunc[n]=void 0)}}}j.__initStatic();function Vr(){D("error",t=>{const[e,n,i]=ri();if(!e.getIntegration(j))return;const{msg:s,url:r,line:o,column:a,error:c}=t;if(Qn()||c&&c.__sentry_own_request__)return;const u=c===void 0&&H(s)?Qr(s,r,o,a):ii(Lt(n,c||s,void 0,i,!1),r,o,a);u.level="error",si(e,c,u,"onerror")})}function Kr(){D("unhandledrejection",t=>{const[e,n,i]=ri();if(!e.getIntegration(j))return;let s=t;try{"reason"in t?s=t.reason:"detail"in t&&"reason"in t.detail&&(s=t.detail.reason)}catch{}if(Qn()||s&&s.__sentry_own_request__)return!0;const r=wn(s)?Zr(s):Lt(n,s,void 0,i,!0);r.level="error",si(e,s,r,"onunhandledrejection")})}function Zr(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Qr(t,e,n,i){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let r=Nn(t)?t.message:t,o="Error";const a=r.match(s);return a&&(o=a[1],r=a[2]),ii({exception:{values:[{type:o,value:r}]}},e,n,i)}function ii(t,e,n,i){const s=t.exception=t.exception||{},r=s.values=s.values||[],o=r[0]=r[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(i,10))?void 0:i,l=isNaN(parseInt(n,10))?void 0:n,d=H(e)&&e.length>0?e:Si();return c.length===0&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),t}function eo(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`Global Handler attached: ${t}`)}function si(t,e,n,i){be(n,{handled:!1,type:i}),t.captureEvent(n,{originalException:e})}function ri(){const t=b(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}const to=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Ne{static __initStatic(){this.id="TryCatch"}__init(){this.name=Ne.id}constructor(e){Ne.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&T(g,"setTimeout",_n),this._options.setInterval&&T(g,"setInterval",_n),this._options.requestAnimationFrame&&T(g,"requestAnimationFrame",no),this._options.XMLHttpRequest&&"XMLHttpRequest"in g&&T(XMLHttpRequest.prototype,"send",io);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:to).forEach(so)}}Ne.__initStatic();function _n(t){return function(...e){const n=e[0];return e[0]=fe(n,{mechanism:{data:{function:q(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function no(t){return function(e){return t.apply(this,[fe(e,{mechanism:{data:{function:"requestAnimationFrame",handler:q(t)},handled:!0,type:"instrument"}})])}}function io(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&T(n,s,function(r){const o={mechanism:{data:{function:s,handler:q(r)},handled:!0,type:"instrument"}},a=Dt(r);return a&&(o.mechanism.data.handler=q(a)),fe(r,o)})}),t.apply(this,e)}}function so(t){const e=g,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(T(n,"addEventListener",function(i){return function(s,r,o){try{typeof r.handleEvent=="function"&&(r.handleEvent=fe(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:q(r),target:t},handled:!0,type:"instrument"}}))}catch{}return i.apply(this,[s,fe(r,{mechanism:{data:{function:"addEventListener",handler:q(r),target:t},handled:!0,type:"instrument"}}),o])}}),T(n,"removeEventListener",function(i){return function(s,r,o){const a=r;try{const c=a&&a.__sentry_wrapped__;c&&i.call(this,s,c,o)}catch{}return i.call(this,s,a,o)}}))}const ro="cause",oo=5;class re{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=re.id}constructor(e={}){re.prototype.__init.call(this),this._key=e.key||ro,this._limit=e.limit||oo}setupOnce(){const e=b().getClient();e&&Ot((n,i)=>{const s=b().getIntegration(re);return s?ao(e.getOptions().stackParser,s._key,s._limit,n,i):n})}}re.__initStatic();function ao(t,e,n,i,s){if(!i.exception||!i.exception.values||!s||!O(s.originalException,Error))return i;const r=oi(t,n,s.originalException,e);return i.exception.values=[...r,...i.exception.values],i}function oi(t,e,n,i,s=[]){if(!O(n[i],Error)||s.length+1>=e)return s;const r=ei(t,n[i]);return oi(t,e,n[i],i,[r,...s])}class oe{constructor(){oe.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=oe.id}setupOnce(){Ot(e=>{if(b().getIntegration(oe)){if(!g.navigator&&!g.location&&!g.document)return e;const n=e.request&&e.request.url||g.location&&g.location.href,{referrer:i}=g.document||{},{userAgent:s}=g.navigator||{},r={...e.request&&e.request.headers,...i&&{Referer:i},...s&&{"User-Agent":s}},o={...e.request,...n&&{url:n},headers:r};return{...e,request:o}}return e})}}oe.__initStatic();class ae{constructor(){ae.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=ae.id}setupOnce(e,n){const i=s=>{if(s.type)return s;const r=n().getIntegration(ae);if(r){try{if(co(s,r._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return r._previousEvent=s}return r._previousEvent=s}return s};i.id=this.name,e(i)}}ae.__initStatic();function co(t,e){return e?!!(uo(t,e)||lo(t,e)):!1}function uo(t,e){const n=t.message,i=e.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!ci(t,e)||!ai(t,e))}function lo(t,e){const n=pn(e),i=pn(t);return!(!n||!i||n.type!==i.type||n.value!==i.value||!ci(t,e)||!ai(t,e))}function ai(t,e){let n=hn(t),i=hn(e);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let s=0;s<i.length;s++){const r=i[s],o=n[s];if(r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r.function!==o.function)return!1}return!0}function ci(t,e){let n=t.fingerprint,i=e.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function pn(t){return t.exception&&t.exception.values&&t.exception.values[0]}function hn(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const fo=[new se,new Re,new Ne,new xe,new j,new re,new ae,new oe];function _o(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=fo),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),g.SENTRY_RELEASE&&g.SENTRY_RELEASE.id&&(t.release=g.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:Bi(t.stackParser||Jr),integrations:Xs(t),transport:t.transport||(Yn()?Br:Ur)};sr(Dr,e),t.autoSessionTracking&&po()}function mn(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function po(){if(typeof g.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const t=b();t.captureSession&&(mn(t),D("history",({from:e,to:n})=>{e===void 0||e===n||mn(b())}))}function h(t){let e,n=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=r(n)):(s==="call"||s==="optionalCall")&&(n=r((...o)=>n.call(e,...o)),e=void 0)}return n}function Q(t){const e=h([t,"call",i=>i(),"access",i=>i.getClient,"call",i=>i(),"optionalAccess",i=>i.getOptions,"call",i=>i()]);return(h([e,"optionalAccess",i=>i.instrumenter])||"sentry")!=="sentry"}class je{static __initStatic(){this.id="Express"}__init(){this.name=je.id}constructor(e={}){je.prototype.__init.call(this),this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,n){if(!this._router){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("ExpressIntegration is missing an Express instance");return}if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Express Integration is skipped because of instrumenter configuration.");return}go(this._router,this._methods),yo(this._router)}}je.__initStatic();function gn(t,e){const n=t.length;switch(n){case 2:return function(i,s){const r=s.__sentry_transaction;if(r){const o=r.startChild({description:t.name,op:`middleware.express.${e}`});s.once("finish",()=>{o.finish()})}return t.call(this,i,s)};case 3:return function(i,s,r){const o=s.__sentry_transaction,a=h([o,"optionalAccess",c=>c.startChild,"call",c=>c({description:t.name,op:`middleware.express.${e}`})]);t.call(this,i,s,function(...c){h([a,"optionalAccess",u=>u.finish,"call",u=>u()]),r.call(this,...c)})};case 4:return function(i,s,r,o){const a=r.__sentry_transaction,c=h([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:t.name,op:`middleware.express.${e}`})]);t.call(this,i,s,r,function(...u){h([c,"optionalAccess",l=>l.finish,"call",l=>l()]),o.call(this,...u)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function ho(t,e){return t.map(n=>typeof n=="function"?gn(n,e):Array.isArray(n)?n.map(i=>typeof i=="function"?gn(i,e):i):n)}function mo(t,e){const n=t[e];return t[e]=function(...i){return n.call(this,...ho(i,e))},t}function go(t,e=[]){e.forEach(n=>mo(t,n))}function yo(t){const e="settings"in t;e&&t._router===void 0&&t.lazyrouter&&t.lazyrouter();const n=e?t._router:t;if(!n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.debug("Routing instrumentation is currently only supported in Express 4.");return}const i=Object.getPrototypeOf(n),s=i.process_params;i.process_params=function(o,a,c,u,l){c._reconstructedRoute||(c._reconstructedRoute="");const{layerRoutePath:d,isRegex:p,isArray:_,numExtraSegments:m}=Eo(o);(d||p||_)&&(c._hasParameters=!0);const ee=(d||o.path||"").split("/").filter(te=>te.length>0&&(p||_||!te.includes("*"))).join("/");ee&&ee.length>0&&(c._reconstructedRoute+=`/${ee}${p?"/":""}`);const rt=Ce(c.originalUrl||"")+m,fi=Ce(c._reconstructedRoute);if(rt===fi){c._hasParameters||c._reconstructedRoute!==c.originalUrl&&(c._reconstructedRoute=c.originalUrl);const te=u.__sentry_transaction;if(te&&te.metadata.source!=="custom"){const _i=c._reconstructedRoute||"/";te.setName(...is(c,{path:!0,method:!0,customRoute:_i}))}}return s.call(this,o,a,c,u,l)}}function Eo(t){const e=h([t,"access",o=>o.route,"optionalAccess",o=>o.path]),n=Dn(e),i=Array.isArray(e);if(!e)return{isRegex:n,isArray:i,numExtraSegments:0};const s=i?Math.max(So(e)-Ce(t.path||""),0):0;return{layerRoutePath:To(i,e),isRegex:n,isArray:i,numExtraSegments:s}}function So(t){return t.reduce((e,n)=>e+Ce(n.toString()),0)}function To(t,e){return t?e.map(n=>n.toString()).join(","):e&&e.toString()}class He{static __initStatic(){this.id="Postgres"}__init(){this.name=He.id}constructor(e={}){He.prototype.__init.call(this),this._usePgNative=!!e.usePgNative}setupOnce(e,n){if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Postgres Integration is skipped because of instrumenter configuration.");return}const i=K("pg");if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Postgres Integration was unable to require `pg` package.");return}if(this._usePgNative&&!h([i,"access",r=>r.native,"optionalAccess",r=>r.Client])){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Postgres Integration was unable to access 'pg-native' bindings.");return}const{Client:s}=this._usePgNative?i.native:i;T(s.prototype,"query",function(r){return function(o,a,c){const u=n().getScope(),l=h([u,"optionalAccess",_=>_.getSpan,"call",_=>_()]),d=h([l,"optionalAccess",_=>_.startChild,"call",_=>_({description:typeof o=="string"?o:o.text,op:"db"})]);if(typeof c=="function")return r.call(this,o,a,function(_,m){h([d,"optionalAccess",w=>w.finish,"call",w=>w()]),c(_,m)});if(typeof a=="function")return r.call(this,o,function(_,m){h([d,"optionalAccess",w=>w.finish,"call",w=>w()]),a(_,m)});const p=typeof a<"u"?r.call(this,o,a):r.call(this,o);return z(p)?p.then(_=>(h([d,"optionalAccess",m=>m.finish,"call",m=>m()]),_)):(h([d,"optionalAccess",_=>_.finish,"call",_=>_()]),p)}})}}He.__initStatic();class qe{constructor(){qe.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=qe.id}setupOnce(e,n){if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Mysql Integration is skipped because of instrumenter configuration.");return}const i=K("mysql/lib/Connection.js");if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Mysql Integration was unable to require `mysql` package.");return}T(i,"createQuery",function(s){return function(r,o,a){const c=n().getScope(),u=h([c,"optionalAccess",d=>d.getSpan,"call",d=>d()]),l=h([u,"optionalAccess",d=>d.startChild,"call",d=>d({description:typeof r=="string"?r:r.sql,op:"db"})]);return typeof a=="function"?s.call(this,r,o,function(d,p,_){h([l,"optionalAccess",m=>m.finish,"call",m=>m()]),a(d,p,_)}):typeof o=="function"?s.call(this,r,function(d,p,_){h([l,"optionalAccess",m=>m.finish,"call",m=>m()]),o(d,p,_)}):s.call(this,r,o,a)}})}}qe.__initStatic();const bo=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],vo={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function Ro(t){return t&&typeof t=="object"&&t.once&&typeof t.once=="function"}class ze{static __initStatic(){this.id="Mongo"}__init(){this.name=ze.id}constructor(e={}){ze.prototype.__init.call(this),this._operations=Array.isArray(e.operations)?e.operations:bo,this._describeOperations="describeOperations"in e?e.describeOperations:!0,this._useMongoose=!!e.useMongoose}setupOnce(e,n){if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Mongo Integration is skipped because of instrumenter configuration.");return}const i=this._useMongoose?"mongoose":"mongodb",s=K(i);if(!s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error(`Mongo Integration was unable to require \`${i}\` package.`);return}this._instrumentOperations(s.Collection,this._operations,n)}_instrumentOperations(e,n,i){n.forEach(s=>this._patchOperation(e,s,i))}_patchOperation(e,n,i){if(!(n in e.prototype))return;const s=this._getSpanContextFromOperationArguments.bind(this);T(e.prototype,n,function(r){return function(...o){const a=o[o.length-1],c=i().getScope(),u=h([c,"optionalAccess",d=>d.getSpan,"call",d=>d()]);if(typeof a!="function"||n==="mapReduce"&&o.length===2){const d=h([u,"optionalAccess",_=>_.startChild,"call",_=>_(s(this,n,o))]),p=r.call(this,...o);if(z(p))return p.then(_=>(h([d,"optionalAccess",m=>m.finish,"call",m=>m()]),_));if(Ro(p)){const _=p;try{_.once("close",()=>{h([d,"optionalAccess",m=>m.finish,"call",m=>m()])})}catch{h([d,"optionalAccess",w=>w.finish,"call",w=>w()])}return _}else return h([d,"optionalAccess",_=>_.finish,"call",_=>_()]),p}const l=h([u,"optionalAccess",d=>d.startChild,"call",d=>d(s(this,n,o.slice(0,-1)))]);return r.call(this,...o.slice(0,-1),function(d,p){h([l,"optionalAccess",_=>_.finish,"call",_=>_()]),a(d,p)})}})}_getSpanContextFromOperationArguments(e,n,i){const s={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},r={op:"db",description:n,data:s},o=vo[n],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!o||!a)return r;try{if(n==="mapReduce"){const[c,u]=i;s[o[0]]=typeof c=="string"?c:c.name||"<anonymous>",s[o[1]]=typeof u=="string"?u:u.name||"<anonymous>"}else for(let c=0;c<o.length;c++)s[o[c]]=JSON.stringify(i[c])}catch{}return r}}ze.__initStatic();function xo(t){return t&&!!t.$use}class We{static __initStatic(){this.id="Prisma"}__init(){this.name=We.id}constructor(e={}){We.prototype.__init.call(this),xo(e.client)?this._client=e.client:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(e.client)}`)}setupOnce(e,n){if(!this._client){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("PrismaIntegration is missing a Prisma Client Instance");return}if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Prisma Integration is skipped because of instrumenter configuration.");return}this._client.$use((i,s)=>{const r=n().getScope(),o=h([r,"optionalAccess",d=>d.getSpan,"call",d=>d()]),a=i.action,c=i.model,u=h([o,"optionalAccess",d=>d.startChild,"call",d=>d({description:c?`${c} ${a}`:a,op:"db.sql.prisma"})]),l=s(i);return z(l)?l.then(d=>(h([u,"optionalAccess",p=>p.finish,"call",p=>p()]),d)):(h([u,"optionalAccess",d=>d.finish,"call",d=>d()]),l)})}}We.__initStatic();class Xe{constructor(){Xe.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=Xe.id}setupOnce(e,n){if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const i=K("graphql/execution/execute.js");if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("GraphQL Integration was unable to require graphql/execution package.");return}T(i,"execute",function(s){return function(...r){const o=n().getScope(),a=h([o,"optionalAccess",l=>l.getSpan,"call",l=>l()]),c=h([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:"execute",op:"graphql.execute"})]);h([o,"optionalAccess",l=>l.setSpan,"call",l=>l(c)]);const u=s.call(this,...r);return z(u)?u.then(l=>(h([c,"optionalAccess",d=>d.finish,"call",d=>d()]),h([o,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),l)):(h([c,"optionalAccess",l=>l.finish,"call",l=>l()]),h([o,"optionalAccess",l=>l.setSpan,"call",l=>l(a)]),u)}})}}Xe.__initStatic();class Je{static __initStatic(){this.id="Apollo"}__init(){this.name=Je.id}constructor(e={useNestjs:!1}){Je.prototype.__init.call(this),this._useNest=!!e.useNestjs}setupOnce(e,n){if(Q(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const i=K("@nestjs/graphql");if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}T(i.GraphQLFactory.prototype,"mergeWithSchema",function(s){return function(...r){return T(this.resolversExplorerService,"explore",function(o){return function(){const a=Pe(o.call(this));return yn(a,n)}}),s.call(this,...r)}})}else{const i=K("apollo-server-core");if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.error("Apollo Integration was unable to require apollo-server-core package.");return}T(i.ApolloServerBase.prototype,"constructSchema",function(s){return function(){if(!this.config.resolvers)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this.config.schema?(f.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),f.warn()):this.config.modules&&f.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),f.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),s.call(this);const r=Pe(this.config.resolvers);return this.config.resolvers=yn(r,n),s.call(this)}})}}}Je.__initStatic();function yn(t,e){return t.map(n=>(Object.keys(n).forEach(i=>{Object.keys(n[i]).forEach(s=>{typeof n[i][s]=="function"&&No(n,i,s,e)})}),n))}function No(t,e,n,i){T(t[e],n,function(s){return function(...r){const o=i().getScope(),a=h([o,"optionalAccess",l=>l.getSpan,"call",l=>l()]),c=h([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:`${e}.${n}`,op:"graphql.resolve"})]),u=s.call(this,...r);return z(u)?u.then(l=>(h([c,"optionalAccess",d=>d.finish,"call",d=>d()]),l)):(h([c,"optionalAccess",l=>l.finish,"call",l=>l()]),u)}})}const E=I;function wo(){E&&E.document?E.document.addEventListener("visibilitychange",()=>{const t=tt();if(E.document.hidden&&t){const e="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t.op}`),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Pt=(t,e,n)=>{let i,s;return r=>{e.value>=0&&(r||n)&&(s=e.value-(i||0),(s||i===void 0)&&(i=e.value,e.delta=s,t(e)))}},Do=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Io=()=>{const t=E.performance.timing,e=E.performance.navigation.type,n={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const i in t)i!=="navigationStart"&&i!=="toJSON"&&(n[i]=Math.max(t[i]-t.navigationStart,0));return n},ui=()=>E.__WEB_VITALS_POLYFILL__?E.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Io()):E.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],di=()=>{const t=ui();return t&&t.activationStart||0},Mt=(t,e)=>{const n=ui();let i="navigate";return n&&(E.document.prerendering||di()>0?i="prerender":i=n.type.replace(/_/g,"-")),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:Do(),navigationType:i}},De=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver(s=>{e(s.getEntries())});return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch{}},st=(t,e)=>{const n=i=>{(i.type==="pagehide"||E.document.visibilityState==="hidden")&&(t(i),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},ko=t=>{const e=Mt("CLS",0);let n,i=0,s=[];const r=a=>{a.forEach(c=>{if(!c.hadRecentInput){const u=s[0],l=s[s.length-1];i&&s.length!==0&&c.startTime-l.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c]),i>e.value&&(e.value=i,e.entries=s,n&&n())}})},o=De("layout-shift",r);if(o){n=Pt(t,e);const a=()=>{r(o.takeRecords()),n(!0)};return st(a),a}};let Le=-1;const Bo=()=>E.document.visibilityState==="hidden"&&!E.document.prerendering?0:1/0,Oo=()=>{st(({timeStamp:t})=>{Le=t},!0)},Ct=()=>(Le<0&&(Le=Bo(),Oo()),{get firstHiddenTime(){return Le}}),Uo=t=>{const e=Ct(),n=Mt("FID");let i;const s=a=>{a.startTime<e.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),i(!0))},r=a=>{a.forEach(s)},o=De("first-input",r);i=Pt(t,n),o&&st(()=>{r(o.takeRecords()),o.disconnect()},!0)},En={},Go=t=>{const e=Ct(),n=Mt("LCP");let i;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-di(),0);c<e.firstHiddenTime&&(n.value=c,n.entries=[a],i())}},r=De("largest-contentful-paint",s);if(r){i=Pt(t,n);const o=()=>{En[n.id]||(s(r.takeRecords()),r.disconnect(),En[n.id]=!0,i(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),st(o,!0),o}};function ft(t){return typeof t=="number"&&isFinite(t)}function _e(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}function R(t){return t/1e3}function li(){return E&&E.addEventListener&&E.performance}let Sn=0,v={},B,Te;function Ao(){const t=li();if(t&&de){t.mark&&E.performance.mark("sentry-tracing-init"),Mo();const e=$o(),n=Po();return()=>{e&&e(),n&&n()}}return()=>{}}function Yo(){De("longtask",e=>{for(const n of e){const i=tt();if(!i)return;const s=R(de+n.startTime),r=R(n.duration);i.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:s,endTimestamp:s+r})}})}function Lo(){De("event",e=>{for(const n of e){const i=tt();if(!i)return;if(n.name==="click"){const s=R(de+n.startTime),r=R(n.duration);i.startChild({description:ue(n.target),op:`ui.interaction.${n.name}`,startTimestamp:s,endTimestamp:s+r})}}},{durationThreshold:0})}function $o(){return ko(t=>{const e=t.entries.pop();e&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding CLS"),v.cls={value:t.value,unit:""},Te=e)})}function Po(){return Go(t=>{const e=t.entries.pop();e&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding LCP"),v.lcp={value:t.value,unit:"millisecond"},B=e)})}function Mo(){Uo(t=>{const e=t.entries.pop();if(!e)return;const n=R(de),i=R(e.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FID"),v.fid={value:t.value,unit:"millisecond"},v["mark.fid"]={value:n+i,unit:"second"}})}function Co(t){const e=li();if(!e||!E.performance.getEntries||!de)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Tracing] Adding & adjusting spans using Performance API");const n=R(de),i=e.getEntries();let s,r;if(i.slice(Sn).forEach(o=>{const a=R(o.startTime),c=R(o.duration);if(!(t.op==="navigation"&&n+a<t.startTimestamp))switch(o.entryType){case"navigation":{jo(t,o,n),s=n+R(o.responseStart),r=n+R(o.requestStart);break}case"mark":case"paint":case"measure":{Fo(t,o,a,c,n);const u=Ct(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FP"),v.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding FCP"),v.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const u=o.name.replace(E.location.origin,"");qo(t,o,u,a,c,n);break}}}),Sn=Math.max(i.length-1,0),zo(t),t.op==="pageload"){typeof s=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding TTFB"),v.ttfb={value:(s-t.startTimestamp)*1e3,unit:"millisecond"},typeof r=="number"&&r<=s&&(v["ttfb.requestTime"]={value:(s-r)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!v[a]||n>=t.startTimestamp)return;const c=v[a].value,u=n+R(c),l=Math.abs((u-t.startTimestamp)*1e3),d=l-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),v[a].value=l});const o=v["mark.fid"];o&&v.fid&&(_e(t,{description:"first input delay",endTimestamp:o.value+R(v.fid.value),op:"ui.action",startTimestamp:o.value}),delete v["mark.fid"]),"fcp"in v||delete v.cls,Object.keys(v).forEach(a=>{t.setMeasurement(a,v[a].value,v[a].unit)}),Wo(t)}B=void 0,Te=void 0,v={}}function Fo(t,e,n,i,s){const r=s+n,o=r+i;return _e(t,{description:e.name,endTimestamp:o,op:e.entryType,startTimestamp:r}),r}function jo(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(i=>{Ge(t,e,i,n)}),Ge(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),Ge(t,e,"fetch",n,"cache","domainLookupStart"),Ge(t,e,"domainLookup",n,"DNS"),Ho(t,e,n)}function Ge(t,e,n,i,s,r){const o=r?e[r]:e[`${n}End`],a=e[`${n}Start`];!a||!o||_e(t,{op:"browser",description:s||n,startTimestamp:i+R(a),endTimestamp:i+R(o)})}function Ho(t,e,n){_e(t,{op:"browser",description:"request",startTimestamp:n+R(e.requestStart),endTimestamp:n+R(e.responseEnd)}),_e(t,{op:"browser",description:"response",startTimestamp:n+R(e.responseStart),endTimestamp:n+R(e.responseEnd)})}function qo(t,e,n,i,s,r){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o={};"transferSize"in e&&(o["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(o["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(o["Decoded Body Size"]=e.decodedBodySize),"renderBlockingStatus"in e&&(o["resource.render_blocking_status"]=e.renderBlockingStatus);const a=r+i,c=a+s;_e(t,{description:n,endTimestamp:c,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",startTimestamp:a,data:o})}function zo(t){const e=E.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),ft(n.rtt)&&(v["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ft(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),ft(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Wo(t){B&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding LCP Data"),B.element&&t.setTag("lcp.element",ue(B.element)),B.id&&t.setTag("lcp.id",B.id),B.url&&t.setTag("lcp.url",B.url.trim().slice(0,200)),t.setTag("lcp.size",B.size)),Te&&Te.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log("[Measurements] Adding CLS Data"),Te.sources.forEach((e,n)=>t.setTag(`cls.source.${n+1}`,ue(e.node))))}const bt=["localhost",/^\//],vt={traceFetch:!0,traceXHR:!0,tracingOrigins:bt,tracePropagationTargets:bt};function Xo(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:i,tracingOrigins:s,shouldCreateSpanForRequest:r}={traceFetch:vt.traceFetch,traceXHR:vt.traceXHR,...t},o=typeof r=="function"?r:u=>!0,a=u=>Jo(u,i||s),c={};e&&D("fetch",u=>{Vo(u,o,a,c)}),n&&D("xhr",u=>{Zo(u,o,a,c)})}function Jo(t,e){return Ze(t,e||bt)}function Vo(t,e,n,i){if(!At()||!(t.fetchData&&e(t.fetchData.url)))return;if(t.endTimestamp){const a=t.fetchData.__span;if(!a)return;const c=i[a];c&&(t.response?c.setHttpStatus(t.response.status):t.error&&c.setStatus("internal_error"),c.finish(),delete i[a]);return}const s=b().getScope(),r=s&&s.getSpan(),o=r&&r.transaction;if(r&&o){const a=r.startChild({data:{...t.fetchData,type:"fetch"},description:`${t.fetchData.method} ${t.fetchData.url}`,op:"http.client"});t.fetchData.__span=a.spanId,i[a.spanId]=a;const c=t.args[0];t.args[1]=t.args[1]||{};const u=t.args[1];n(t.fetchData.url)&&(u.headers=Ko(c,o.getDynamicSamplingContext(),a,u))}}function Ko(t,e,n,i){const s=jn(e),r=n.toTraceparent(),o=typeof Request<"u"&&O(t,Request)?t.headers:i.headers;if(o)if(typeof Headers<"u"&&O(o,Headers)){const a=new Headers(o);return a.append("sentry-trace",r),s&&a.append(Et,s),a}else if(Array.isArray(o)){const a=[...o,["sentry-trace",r]];return s&&a.push([Et,s]),a}else{const a="baggage"in o?o.baggage:void 0,c=[];return Array.isArray(a)?c.push(...a):a&&c.push(a),s&&c.push(s),{...o,"sentry-trace":r,baggage:c.length>0?c.join(","):void 0}}else return{"sentry-trace":r,baggage:s}}function Zo(t,e,n,i){if(!At()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;const s=t.xhr.__sentry_xhr__;if(t.endTimestamp){const c=t.xhr.__sentry_xhr_span_id__;if(!c)return;const u=i[c];u&&(u.setHttpStatus(s.status_code),u.finish(),delete i[c]);return}const r=b().getScope(),o=r&&r.getSpan(),a=o&&o.transaction;if(o&&a){const c=o.startChild({data:{...s.data,type:"xhr",method:s.method,url:s.url},description:`${s.method} ${s.url}`,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=c.spanId,i[t.xhr.__sentry_xhr_span_id__]=c,t.xhr.setRequestHeader&&n(t.xhr.__sentry_xhr__.url))try{t.xhr.setRequestHeader("sentry-trace",c.toTraceparent());const u=a.getDynamicSamplingContext(),l=jn(u);l&&t.xhr.setRequestHeader(Et,l)}catch{}}}function Qo(t,e=!0,n=!0){if(!E||!E.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn("Could not initialize routing instrumentation due to invalid location");return}let i=E.location.href,s;e&&(s=t({name:E.location.pathname,op:"pageload",metadata:{source:"url"}})),n&&D("history",({to:r,from:o})=>{if(o===void 0&&i&&i.indexOf(r)!==-1){i=void 0;return}o!==r&&(i=void 0,s&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.finish()),s=t({name:E.location.pathname,op:"navigation",metadata:{source:"url"}}))})}const ea="BrowserTracing",ta={...Ye,markBackgroundTransactions:!0,routingInstrumentation:Qo,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...vt};class Ft{__init(){this.name=ea}constructor(e){Ft.prototype.__init.call(this),Wn(),this.options={...ta,...e},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Ao(),this.options.enableLongTask&&Yo(),this.options._experiments.enableInteractions&&Lo()}setupOnce(e,n){this._getCurrentHub=n;const{routingInstrumentation:i,startTransactionOnLocationChange:s,startTransactionOnPageLoad:r,markBackgroundTransactions:o,traceFetch:a,traceXHR:c,tracePropagationTargets:u,shouldCreateSpanForRequest:l,_experiments:d}=this.options;i(p=>{const _=this._createRouteTransaction(p);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(_,p,n),_},r,s),o&&wo(),d.enableInteractions&&this._registerInteractionListener(),Xo({traceFetch:a,traceXHR:c,tracePropagationTargets:u,shouldCreateSpanForRequest:l})}_createRouteTransaction(e){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const{beforeNavigate:n,idleTimeout:i,finalTimeout:s,heartbeatInterval:r}=this.options,o=e.op==="pageload",a=o?Tn("sentry-trace"):null,c=o?Tn("baggage"):null,u=a?us(a):void 0,l=c?vs(c):void 0,d={...e,...u,metadata:{...e.metadata,dynamicSamplingContext:u&&!l?{}:l},trimEnd:!0},p=typeof n=="function"?n(d):d,_=p===void 0?{...d,sampled:!1}:p;_.metadata=_.name!==d.name?{..._.metadata,source:"custom"}:_.metadata,this._latestRouteName=_.name,this._latestRouteSource=_.metadata&&_.metadata.source,_.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Will not send ${_.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.log(`[Tracing] Starting ${_.op} transaction on scope`);const m=this._getCurrentHub(),{location:w}=E,ee=an(m,_,i,s,!0,{location:w},r);return ee.registerBeforeFinishCallback(rt=>{this._collectWebVitals(),Co(rt)}),ee}_registerInteractionListener(){let e;const n=()=>{const{idleTimeout:i,finalTimeout:s,heartbeatInterval:r}=this.options,o="ui.action.click";if(e&&(e.finish(),e=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&f.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const a=this._getCurrentHub(),{location:c}=E,u={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};e=an(a,u,i,s,!0,{location:c},r)};["click"].forEach(i=>{addEventListener(i,n,{once:!1,capture:!0})})}}function Tn(t){const e=Ti(`meta[name=${t}]`);return e?e.getAttribute("content"):null}function na(){const t=ge();if(!t.__SENTRY__)return;const e={mongodb(){const i=P(A,"./node/integrations/mongo");return new i.Mongo},mongoose(){const i=P(A,"./node/integrations/mongo");return new i.Mongo({mongoose:!0})},mysql(){const i=P(A,"./node/integrations/mysql");return new i.Mysql},pg(){const i=P(A,"./node/integrations/postgres");return new i.Postgres}},n=Object.keys(e).filter(i=>!!K(i)).map(i=>{try{return e[i]()}catch{return}}).filter(i=>i);n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}function ia(){Wn(),It()&&na()}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&ia();const sa=`
        <form id="form" class="space-y-8 divide-y divide-gray-200">
          <div class="space-y-8 divide-y divide-gray-200 sm:space-y-5">
            <div class="space-y-6 sm:space-y-5">
              <div>
                <h3 class="text-base font-semibold leading-6 text-gray-900">Instructions</h3>
                <p class="mt-2 text-sm text-gray-500">For each mouse enter your Name (optional), Holding room ID, Cage ID & Mouse ID into the boxes below. You can upload up to three images of each mouse, with the system displaying an average score across all of the images uploaded.</p>
                <p class="mt-2 text-sm text-gray-500">If you can add a manual palpation score for the mouse (optional) that would help support further development of the system and increase the accuracy. Please see <span id="bcsGuideLink" class="text-indigo-600 font-bold cursor-pointer">BCS method guide</span> for further information.</p>
                <p class="mt-2 text-sm text-gray-500">For detailed instructions for how to take optimal images please see: <span id="imageGuideLink" class="text-indigo-600 font-bold cursor-pointer">Image Guide</span></p>
              </div>

            <div id="errorMessage" class="hidden rounded-md bg-red-50 p-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
                  </svg>
                </div>
                <div class="ml-3">
                  <h3 class="text-sm font-medium text-red-800">There was an error with your submission</h3>
                  <div class="mt-2 text-sm text-red-700">
                    <ul class="ml-6 list-disc"></ul>
                  </div>
                </div>
              </div>
            </div>

            <div class="space-y-6 sm:space-y-5">
              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="observerName" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Observer Name <span class="text-gray-400">(Optional)</span></label>
                <div class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="flex max-w-lg rounded-md shadow-sm">
                    <input type="text" name="observerName" id="observerName" autocomplete="observerName" class="block w-full min-w-0 flex-1 rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>

              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="roomID" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Room ID</label>
                <div class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="flex max-w-lg rounded-md shadow-sm">
                    <input required type="text" name="roomID" id="roomID" autocomplete="roomID" class="block w-full min-w-0 flex-1 rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>

              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="cageID" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Cage ID</label>
                <div class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="flex max-w-lg rounded-md shadow-sm">
                    <input required type="text" name="cageID" id="cageID" autocomplete="cageID" class="block w-full min-w-0 flex-1 rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>

              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="mouseID" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Mouse ID</label>
                <div class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="flex max-w-lg rounded-md shadow-sm">
                    <input required type="text" name="mouseID" id="mouseID" autocomplete="mouseID" class="block w-full min-w-0 flex-1 rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>

              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="cover-photo" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Images <span class="text-gray-400">(Max 3)</span></label>
                <div id="dropZone" class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="max-w-lg justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6">
                    <div id="file-list" class="hidden text-center"></div>
                    <div id="file-message" class="space-y-1 text-center">
                      <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      <div class="text-sm text-gray-600">
                        <label for="file-upload" class="relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500">
                          <span>Upload files</span>
                          <input id="file-upload" name="file-upload" type="file" class="sr-only" multiple="multiple" required>
                        </label>
                        <p class="pl-1">or drag and drop</p>
                      </div>
                      <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                <label for="palpationScore" class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5">Palpation Score <span class="text-gray-400">(Optional)</span></label>
                <div class="mt-2 sm:col-span-2 sm:mt-0">
                  <div class="flex max-w-lg rounded-md shadow-sm">
                    <input type="text" name="palpationScore" id="palpationScore" autocomplete="palpationScore" class="block w-full min-w-0 flex-1 rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="pt-5">
            <div class="flex justify-end gap-x-3">
              <button id="form-reset" type="button" class="rounded-md bg-white py-2 px-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                Reset
              </button>
              <button id="submit" type="submit" class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-indigo-500 hover:bg-indigo-400 transition ease-in-out duration-150">
                <svg class="hidden animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>Submit</span>
              </button>
            </div>
          </div>
        </form>
    `;async function ra(t){t.preventDefault(),bn();const e=new FormData(t.target);let n=0;for(const r of e.keys())r==="file-upload"&&(e.append(`image${n+1}`,e.getAll(r)[n]),n++);e.delete("file-upload");var i={method:"POST",body:e,redirect:"follow"};let s=null;return fetch("https://mousemapp.azurewebsites.net/api/predict?code=72zqkChgmomeOZmmwH_-wT1fg6nxykamnJTExzALnKccAzFufDWatg==",i).then(r=>(s=r.status,r.json())).then(r=>{if(bn(),s===200)return r;r.hasOwnProperty("errors")&&oa(r.errors)}).catch(r=>{throw new Error(r)})}function bn(){const t=document.getElementById("submit"),e=t.getElementsByTagName("span")[0].innerText==="Processing...";t.classList.toggle("cursor-not-allowed"),t.getElementsByTagName("span")[0].innerText=e?"Submit":"Processing...",t.getElementsByTagName("svg")[0].classList.toggle("hidden")}function oa(t){const e=document.getElementById("errorMessage");let n="";for(const[i,s]of Object.entries(t))n+=`<li>${s}</li>`;e.getElementsByTagName("ul")[0].innerHTML=n,e.classList.toggle("hidden")}function aa(t){console.log(t);let e=null;t.observerName===""&&(t.observerName="None"),t.palpationScore===""&&(t.palpationScore="None");const n=`
        <div class="rounded-md bg-red-50 p-4 my-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-red-800">Issue</h3>
                    <div class="mt-2 text-sm text-red-700">
                        <p>Immediate action required.</p>
                    </div>
                </div>
            </div>
        </div>
    `,i=`
        <div class="rounded-md bg-yellow-50 p-4 my-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-yellow-800">Caution</h3>
                    <div class="mt-2 text-sm text-yellow-700">
                        <p>Further monitoring required, action may be needed.</p>
                    </div>
                </div>
            </div>
        </div>
    `,s=`
        <div class="rounded-md bg-green-50 p-4 my-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-green-800">Normal</h3>
                    <div class="mt-2 text-sm text-green-700">
                        <p>No action required.</p>
                    </div>
                </div>
            </div>
        </div>
    `;switch(!0){case t.bcs<2:e=n;break;case t.bcs<3:e=i;break;case t.bcs<4:e=s;break;case t.bcs<5:e=i;break;default:e=n;break}return`
    <div class="overflow-hidden">
        ${e}
        <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Observer Name</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 ${t.observerName==="None"?"italic":""}">${t.observerName}</dd>
                </div>
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Room ID</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">${t.roomID}</dd>
                </div>
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Cage ID</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">${t.cageID}</dd>
                </div>
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Mouse ID</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">${t.mouseID}</dd>
                </div>
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Palpation Score</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 ${t.palpationScore==="None"?"italic":""}">${t.palpationScore}</dd>
                </div>
                <div class="py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Images</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                        <ul role="list" class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 sm:grid-cols-2 lg:mx-0 lg:max-w-none lg:grid-cols-3">
                            ${ca(t.images)}
                        </ul>
                    </dd>
                </div>
            </dl>
        </div>
    </div>
    <div class="pt-5">
        <div class="flex justify-end gap-x-3">
            <button id="return" type="button" class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-indigo-500 hover:bg-indigo-400 transition ease-in-out duration-150">
                Return
            </button>
        </div>
    </div>
    `}function ca(t){let e="";return t.forEach(n=>{e+=`<li><img class="aspect-[3/2] w-full rounded-2xl object-cover" src="${n}" alt=""></li>`}),e}const ua="/assets/bcs-features-5d5fe1b5.png",da="/assets/bcs-scale-369316f9.png",la="/assets/bw-top-ff2b63b6.jpg",fa="/assets/bw-side-20bf442e.jpg",_a="/assets/heat-top-269c638f.jpg",pa="/assets/heat-side-17363099.jpg",ha=`
    <div class="space-y-6 sm:space-y-5">
        <div>
            <h3 class="text-base font-semibold leading-6 text-gray-900">Guide to Body Condition Scoring</h3>
            <p class="mt-2 text-sm text-gray-500">Body condition scoring (BCS) is a non-invasive method of assessing health & establishing endpoints in young (i.e. growing) & adult mice. BCS is often used when bodyweight cannot be viably monitored.</p>
            <p class="mt-2 text-sm text-gray-500">BCS scored on a 5-point scale developed by Burkholder et al. (2012)*</p>
        </div>
        <div>
            <img src="${ua}" alt="bcs-guide" class="mb-8 mx-auto" />
            <img src="${da}" alt="bcs-guide" class="mx-auto" />
            <p class="mb-8 text-xs text-center text-gray-500">Burkholder et al. (2012) Curr Protoc Mouse Biol 2: 145165</p>
        </div>
        <div>
            <p class="mt-2 text-sm text-gray-500">Under normal circumstances BCS is scored using palpation determine muscle mass & fat covering over bony protuberances in sacral region of vertebrae (i.e., cranial base of the tail).</p>
        </div>
        <div class="pt-5 flex justify-end gap-x-3">
            <button type="button" class="back-link rounded-md bg-white py-2 px-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                Back
            </button>
        </div>
    </div>
`,ma=`
    <div class="space-y-6 sm:space-y-5">
        <div>
            <h3 class="text-base font-semibold leading-6 text-gray-900">Guide to taking images</h3>
            <p class="mt-2 text-sm text-gray-500">Thermal images should be taken either using a thermal camera or thermal camera adapter for phone or table (e.g., FLIR ONE). The system can process images taken from two angles; side/profile view or top/overhead view. Examples of these can be seen below. You are able to upload up to three images of each mouse, with the system displaying an average score across all of the images uploaded.</p>
        </div>
        <div class="flex flex-row">
            <div class="basis-1/2 p-8">
                <h4 class="text-center font-bold mb-4">Side/Profile View</h4>
                <img src="${fa}" alt="bcs-guide" class="w-full mb-4" />
                <img src="${pa}" alt="bcs-guide" class="w-full" />
            </div>
            <div class="basis-1/2 p-8">
            <h4 class="text-center font-bold mb-4">Top/Overhead View</h4>
                <img src="${la}" alt="bcs-guide" class="w-full mb-4" />
                <img src="${_a}" alt="bcs-guide" class="w-full" />
            </div>
        </div>
        <div class="pt-5 flex justify-end gap-x-3">
            <button type="button" class="back-link rounded-md bg-white py-2 px-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                Back
            </button>
        </div>
    </div>
`,ga="/assets/mice-7dbddb56.png";document.querySelector("#app").innerHTML=`
  <div class="bg-gradient-to-r from-cyan-500 to-blue-500">
    <div class="h-screen relative isolate pt-12 px-6 sm:pt-16 lg:px-8 bg-cover bg-center" style="background-image:url('${ga}')">
      <div class="mx-auto max-w-2xl text-center">
        <h2 class="text-4xl font-bold tracking-tight text-white sm:text-6xl mb-10">Mouse MApp  Body Condition Scoring</h2>
        <h4 class="text-2xl tracking-tight text-white sm:text-4xl">An image classifier for the assessment of body condition (BCS) in mice</h4>
      </div>
      <div id="content" class="mx-auto max-w-4xl rounded-none rounded-t-lg bg-white p-10 mt-10 drop-shadow-lg">
        <div id="bcsForm" data-active="true"></div>
        <div id="bcsResults" class="hidden"></div>
        <div id="imageGuide" class="hidden"></div>
        <div id="bcsGuide" class="hidden"></div>
      </div>
    </div>
  </div>
`;const y=document.getElementById("bcsForm"),V=document.getElementById("bcsResults"),pe=document.getElementById("imageGuide"),he=document.getElementById("bcsGuide");y.innerHTML=sa;pe.innerHTML=ma;he.innerHTML=ha;y.querySelector("#imageGuideLink").addEventListener("click",()=>{y.classList.add("hidden"),V.classList.add("hidden"),pe.classList.remove("hidden"),he.classList.add("hidden")});y.querySelector("#bcsGuideLink").addEventListener("click",()=>{y.classList.add("hidden"),V.classList.add("hidden"),pe.classList.add("hidden"),he.classList.remove("hidden")});const vn=document.getElementsByClassName("back-link");for(let t=0;t<vn.length;t++)vn[t].addEventListener("click",()=>{y.classList.remove("hidden"),V.classList.add("hidden"),pe.classList.add("hidden"),he.classList.add("hidden")});y.querySelector("#form-reset").addEventListener("click",()=>{y.querySelector("#file-list").innerHTML="",y.querySelector("#file-message").classList.remove("hidden"),y.querySelector("#file-list").classList.add("hidden"),y.querySelector("#form").reset()});y.querySelector("#file-upload").addEventListener("change",()=>{if(y.querySelector("#file-upload").files.length<4)Ve(y.querySelector("#file-upload").files);else{const t=[];t.push(y.querySelector("#file-upload").files.item(0)),t.push(y.querySelector("#file-upload").files.item(1)),t.push(y.querySelector("#file-upload").files.item(2)),Ve(t)}});y.querySelector("#dropZone").addEventListener("dragstart",t=>{t.preventDefault()});y.querySelector("#dropZone").addEventListener("dragenter",t=>{t.preventDefault()});y.querySelector("#dropZone").addEventListener("dragover",t=>{t.preventDefault()});y.querySelector("#dropZone").addEventListener("drop",t=>{if(t.preventDefault(),t.dataTransfer.files.length<4)y.querySelector("#file-upload").files=t.dataTransfer.files,Ve(t.dataTransfer.files);else{const e=new DataTransfer;e.items.add(evt.dataTransfer.files[0]),e.items.add(evt.dataTransfer.files[1]),e.items.add(evt.dataTransfer.files[2]),y.querySelector("#file-upload").files=e.files,Ve(e.files)}});y.querySelector("#form").addEventListener("submit",t=>{t.preventDefault();const e=[];for(let n=0;n<y.querySelector("#file-upload").files.length;n++)e.push(URL.createObjectURL(y.querySelector("#file-upload").files[n]));ra(t).then(n=>{n&&(n.images=e,V.innerHTML=aa(n),V.querySelector("#return").addEventListener("click",()=>{y.classList.remove("hidden"),V.classList.add("hidden"),pe.classList.add("hidden"),he.classList.add("hidden")}),y.classList.add("hidden"),V.classList.remove("hidden"),pe.classList.add("hidden"),he.classList.add("hidden"))}).catch(n=>{console.error(n)})});location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&_o({dsn:"https://b09b80983a54445bbfa01657e146178a@o1080315.ingest.sentry.io/4504660631879680",integrations:[new Ft],environment:"Production",tracesSampleRate:1});function Ve(t){let e="";for(let n=0;n<t.length;n++)e+=`
      <span class="inline-flex items-center rounded-full bg-indigo-100 py-0.5 px-2.5 mb-2.5 text-sm font-medium text-indigo-700">
        ${t[n].name}
      </span>`;y.querySelector("#file-list").innerHTML=e,y.querySelector("#file-list").classList.remove("hidden")}window.location.hostname==="htandme.co.uk"&&Sentry.init({dsn:"https://b09b80983a54445bbfa01657e146178a@o1080315.ingest.sentry.io/4504660631879680",tracesSampleRate:1,environment:"Production"})});export default ya();
